import Message from "./message.ts";
const fromHexString = (hexString: string) =>
  new Uint8Array(hexString.match(/.{1,2}/g)!.map(byte => parseInt(byte, 16)));
const b = fromHexString("0100011a02011c970431312f32352f32303230200d0a0d0a48657920637265776d6174657321200d0a0d0a486572652061726520736f6d65207570646174657320666f7220796f753a200d0a2d204e6577207570646174657320617265206f757420616e6420627567732061726520706174636865642c20696e636c7564696e67207468652066697820666f7220746865205265636f72642054656d7073207461736b20696e20506f6c757320666f7220694f532e0d0a2d2046757475726520706c616e733a20576f726b696e67206f6e206163636f756e747320666f72207265706f7274696e6720616e64206164646974696f6e616c206c616e677561676520737570706f72742e200d0a2d20576520686176652061205b68747470733a2f2f7777772e747769747465722e636f6d2f416d6f6e67557347616d655d547769747465725b5d20706167652077697468206120736e65616b207065656b2061742061206e6577206d61702e2e2e0d0a0d0a526561642061626f757420616c6c207468652076323032302e31312e3137206275672066697865732c20706c616e732c20616e642075706461746573205b68747470733a2f2f696e6e6572736c6f74682e697463682e696f2f616d6f6e672d75732f6465766c6f672f3139383437362f66697865732d616e642d612d7065656b2d61742d7468652d6e65772d6d61705d686572655b5d2e0d0a0d0a5468616e6b7320666f7220706c6179696e6721200100020001000303");
const msg = new Message(b);
msg.readBytes(3);

while (msg.hasBytesLeft()) {
  const m = msg.readMessage();
  console.log(m.tag)
}